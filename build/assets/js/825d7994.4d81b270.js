"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[2623],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=n.createContext({}),i=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=i(e.components);return n.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=i(a),m=r,h=p["".concat(u,".").concat(m)]||p[m]||d[m]||o;return a?n.createElement(h,l(l({ref:t},c),{},{components:a})):n.createElement(h,l({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:r,l[1]=s;for(var i=2;i<o;i++)l[i]=a[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(67294),r=a(86010);const o={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,l),hidden:a},t)}},74866:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(87462),r=a(67294),o=a(86010),l=a(12466),s=a(16550),u=a(91980),i=a(67392),c=a(50012);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function d(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??p(a);return function(e){const t=(0,i.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:a}=e;const n=(0,s.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,u._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function f(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,o=d(e),[l,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[u,i]=h({queryString:a,groupId:n}),[p,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,c.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:n}),b=(()=>{const e=u??p;return m({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{b&&s(b)}),[b]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),i(e),f(e)}),[i,f,o]),tabValues:o}}var b=a(72389);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:a,selectedValue:s,selectValue:u,tabValues:i}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),d=e=>{const t=e.currentTarget,a=c.indexOf(t),n=i[a].value;n!==s&&(p(t),u(n))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=c.indexOf(e.currentTarget)+1;t=c[a]??c[0];break}case"ArrowLeft":{const a=c.indexOf(e.currentTarget)-1;t=c[a]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},i.map((e=>{let{value:t,label:a,attributes:l}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},l,{className:(0,o.Z)("tabs__item",y.tabItem,l?.className,{"tabs__item--active":s===t})}),a??t)})))}function g(e){let{lazy:t,children:a,selectedValue:n}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function v(e){const t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",y.tabList)},r.createElement(k,(0,n.Z)({},e,t)),r.createElement(g,(0,n.Z)({},e,t)))}function w(e){const t=(0,b.Z)();return r.createElement(v,(0,n.Z)({key:String(t)},e))}},97680:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var n=a(87462),r=(a(67294),a(3905)),o=a(74866),l=a(85162);const s={sidebar_label:"Usage Configurations"},u="Usage Configurations",i={unversionedId:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization",id:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization",title:"Usage Configurations",description:"Usage configurations control behaviors surrounding how a key can be used. For example, dictating whether a key can be used to call only claim, or createaccountand_claim.",source:"@site/docs/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization.md",sourceDirName:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops",slug:"/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization",permalink:"/docs/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/docs/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization.md",tags:[],version:"current",frontMatter:{sidebar_label:"Usage Configurations"}},c={},p=[{value:"Permissions",id:"permissions",level:2},{value:"Use case",id:"use-case",level:3},{value:"Refund Deposit",id:"refund-deposit",level:2},{value:"Use case",id:"use-case-1",level:3},{value:"Auto-Delete Drop",id:"auto-delete-drop",level:2},{value:"Use case",id:"use-case-2",level:3},{value:"Auto-Withdraw",id:"auto-withdraw",level:2},{value:"Use case",id:"use-case-3",level:3},{value:"Account Creation Fields",id:"account-creation-fields",level:2},{value:"Use case",id:"use-case-4",level:3}],d={toc:p},m="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"usage-configurations"},"Usage Configurations"),(0,r.kt)("p",null,"Usage configurations control behaviors surrounding ",(0,r.kt)("em",{parentName:"p"},"how")," a key can be used. For example, dictating whether a key can be used to call only ",(0,r.kt)("inlineCode",{parentName:"p"},"claim"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account_and_claim"),".  "),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"KPJS",label:"\ud83d\udd11 Keypom SDK",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-js/blob/29c10f949f02f673d4a3cecc21b0f74bca600075/src/lib/types/drops.ts#L117-L154\n"))),(0,r.kt)(l.Z,{value:"KP",label:"\ud83d\udcda Protocol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust",metastring:"reference",reference:!0},"https://github.com/keypom/keypom/blob/7a654aa847f2ce9dedf65755c6a08817eece4666/contract/src/models/drop_model.rs#L142-L154\n")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"permissions"},"Permissions"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: ",(0,r.kt)("inlineCode",{parentName:"em"},"claim")," AND ",(0,r.kt)("inlineCode",{parentName:"em"},"create_account_and_claim")),"  "),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"permissions")," parameter assigns which claim methods the user can call with the key you give them. They can either call both, or just one. "),(0,r.kt)("h3",{id:"use-case"},"Use case"),(0,r.kt)("p",null,"Pretend you are hosting a talk about your NEAR dApp: ",(0,r.kt)("inlineCode",{parentName:"p"},"Kramerly"),". Your only goal is to onboard as many ",(0,r.kt)("em",{parentName:"p"},"new")," users from the audience as possible. If the user already has a NEAR wallet, they shouldn't be able to claim assets and onboard. This is similar to free-trials in Web2 whereby only new users are able to participate."),(0,r.kt)("p",null,"To do this, you can set the ",(0,r.kt)("inlineCode",{parentName:"p"},"permissions")," parameter to ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account_and_claim"),"."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"refund-deposit"},"Refund Deposit"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: False"),"  "),(0,r.kt)("p",null,"This ",(0,r.kt)("inlineCode",{parentName:"p"},"refund_deposit")," parameter defines whether or not the ",(0,r.kt)("inlineCode",{parentName:"p"},"deposit_for_use")," amount should be refunded to the drop owner if ",(0,r.kt)("inlineCode",{parentName:"p"},"claim")," is called rather than ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account_and_claim"),"."),(0,r.kt)("p",null,"Part of funding a drop is ",(0,r.kt)("em",{parentName:"p"},"optionally")," covering the cost for creating a new named account. Sometimes, you might want to sponsor a small amount of $NEAR to cover that cost but it should only be used for account creation. If an account is ",(0,r.kt)("em",{parentName:"p"},"not")," being created (through calling ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account_and_claim"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"deposit_per_use")," should be sent back to the funder."),(0,r.kt)("h3",{id:"use-case-1"},"Use case"),(0,r.kt)("p",null,"This parameter is usually a helpful mechanism when onboarding large numbers of users onto NEAR. Pretend you are onboarding 100,000 new users. Since they are new, you factor in the storage deposit needed to create the new wallets into your funding costs. After the event, however, it turns out half of the users had existing wallets.  "),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"refund_deposit")," was true, you would be refunded the ",(0,r.kt)("inlineCode",{parentName:"p"},"deposit_per_use")," that normally would have been sent to the existing NEAR wallets.  "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"auto-delete-drop"},"Auto-Delete Drop"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: False"),"  "),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"auto_delete_drop")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", the drop will be deleted once all the keys have been used and deleted."),(0,r.kt)("h3",{id:"use-case-2"},"Use case"),(0,r.kt)("p",null,"A great use case is for one-off drops where you don't plan on adding more keys to. By setting ",(0,r.kt)("inlineCode",{parentName:"p"},"auto_delete_drop")," to true, the drop will automatically be deleted once all the keys are used.   "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"auto-withdraw"},"Auto-Withdraw"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: False"),"  "),(0,r.kt)("p",null,"This parameter is used to automatically withdraw your Keypom balance once you delete your last drop."),(0,r.kt)("h3",{id:"use-case-3"},"Use case"),(0,r.kt)("p",null,"This parameter is useful for users that create 1-off drops and don't want to worry about deleting their drop once it's used or having to manually withdraw their Keypom balance.  "),(0,r.kt)("p",null,"A funder could create a drop and give out keys without ever needing to return back to Keypom. Once the drop is exhausted, it is deleted and the funder's balance is automatically withdrawn. "),(0,r.kt)("p",null,"Note that this must be used together with ",(0,r.kt)("inlineCode",{parentName:"p"},"auto_delete_drop"),"."),(0,r.kt)("h2",{id:"account-creation-fields"},"Account Creation Fields"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: None")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"account_creation_fields")," allows you to specify any arguments to be passed in to ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account")," when creating your account"),(0,r.kt)("h3",{id:"use-case-4"},"Use case"),(0,r.kt)("p",null,"Pretend you are looking to use Keypom to onboard users and give them custom subaccounts. To ensure that only the people  using your drop can create a subaccount, you can add a secret ",(0,r.kt)("inlineCode",{parentName:"p"},"account_creation_fields")," argument to your drop."),(0,r.kt)("p",null,"This way, if someone outside of the drop were to try to call ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account")," on your contract, they would need to pass in the secret ",(0,r.kt)("inlineCode",{parentName:"p"},"account_creation_field")," that they would not know."))}h.isMDXComponent=!0}}]);
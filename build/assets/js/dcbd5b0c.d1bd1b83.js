"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[2128],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>h});var n=o(7294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=d(o),m=a,h=c["".concat(s,".").concat(m)]||c[m]||u[m]||r;return o?n.createElement(h,i(i({ref:t},p),{},{components:o})):n.createElement(h,i({ref:t},p))}));function h(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=o[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},2810:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var n=o(7462),a=(o(7294),o(3905));const r={sidebar_label:"Final Product"},i="Final Product",l={unversionedId:"Tutorials/Advanced/daos/final",id:"version-2.0/Tutorials/Advanced/daos/final",title:"Final Product",description:"Welcome to the last section of this DAO auto-registration tutorial! Here, you'll be seeing the full toolchain in action.",source:"@site/versioned_docs/version-2.0/Tutorials/Advanced/daos/final.md",sourceDirName:"Tutorials/Advanced/daos",slug:"/Tutorials/Advanced/daos/final",permalink:"/docs/2.0/Tutorials/Advanced/daos/final",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/versioned_docs/version-2.0/Tutorials/Advanced/daos/final.md",tags:[],version:"2.0",frontMatter:{sidebar_label:"Final Product"},sidebar:"Tutorials",previous:{title:"DAO Bot Security Concerns",permalink:"/docs/2.0/Tutorials/Advanced/daos/security"},next:{title:"Introduction",permalink:"/docs/2.0/Tutorials/Advanced/subscriptions/introduction"}},s={},d=[{value:"Getting Started",id:"getting-started",level:2},{value:"Creating and Claiming the Drop",id:"creating-and-claiming-the-drop",level:2},{value:"Claiming the Drop and Viewing Changes",id:"claiming-the-drop-and-viewing-changes",level:2},{value:"Additional Viewing Methods",id:"additional-viewing-methods",level:3},{value:"How You Can Use DAO Bot",id:"how-you-can-use-dao-bot",level:2},{value:"Conclusion",id:"conclusion",level:2}],p={toc:d},c="wrapper";function u(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"final-product"},"Final Product"),(0,a.kt)("p",null,"Welcome to the last section of this DAO auto-registration tutorial! Here, you'll be seeing the full toolchain in action."),(0,a.kt)("h2",{id:"getting-started"},"Getting Started"),(0,a.kt)("p",null,"To follow along on your own machine, you can clone the code from the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/keypom/keypom-docs-examples"},"Keypom docs examples repository")," and run the following command in the root folder ",(0,a.kt)("inlineCode",{parentName:"p"},"keypom-docs-examples"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd advanced-tutorials/dao-onboarding && yarn\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you have been following along and wish to run your own code, run:"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd advanced-tutorials/dao-onboarding-skeleton && yarn\n"))),(0,a.kt)("h2",{id:"creating-and-claiming-the-drop"},"Creating and Claiming the Drop"),(0,a.kt)("p",null,"Before you create and claim your drop, you must ensure that the DAO bot (",(0,a.kt)("inlineCode",{parentName:"p"},"dao-bot.keypom.near")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"keypom-dao-bot.testnet"),") holds its own special role on your DAO. This role must have permissions to add and vote on ",(0,a.kt)("inlineCode",{parentName:"p"},"AddMemberToRole")," proposals."),(0,a.kt)("p",null,"Additionally, as highlighted in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/drop#adding-proposal-and-injected-arguments"},"drop creation")," section, the role that you are planning to auto-register new members into must already exist."),(0,a.kt)("admonition",{title:"note",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This demonstration will be done on mainnet using ",(0,a.kt)("inlineCode",{parentName:"p"},"createDaoDrop-mainnet"),". This is to provide you with visuals on ",(0,a.kt)("a",{parentName:"p",href:"https://near.org/hack.near/widget/DAO.Profile?daoId=keypom-test.sputnik-dao.near"},"BOS"),". "),(0,a.kt)("p",{align:"center"}," ",(0,a.kt)("img",{src:o(6220).default,alt:"bos showcase",width:"80%"})," ")),(0,a.kt)("p",null,"To execute the script, run the following command in the ",(0,a.kt)("inlineCode",{parentName:"p"},"advanced-tutorials/dao-onboarding")," folder:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"node createDaoDrop-mainnet\n")),(0,a.kt)("p",null,"This should give you the following output:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"Receipts: DFf4iY9S4vUiVEZJy2neq4EhcKJXFKyoQqsDb2rvZrHF, 3E7S1h6dBmRZ14BA91CatTzaTEUmj3zLxyYAMG36MZpz\n      Log [v2.keypom.near]: Current Block Timestamp: 1685141815019548108\n      Log [v2.keypom.near]: 21 calls with 105000000000000 attached GAS. Pow outcome: 1.8602935. Required Allowance: 20248156910387200000000\n      Log [v2.keypom.near]: Total required storage Yocto 13850000000000000000000\n      Log [v2.keypom.near]: Current balance: 1.223441, \n          Required Deposit: 0.2350981, \n          total_required_storage: 0.01385,\n          Drop Fee: 0, \n          Key Fee: 0 Total Key Fee: 0,\n          allowance: 0.0202481 total allowance: 0.0202481,\n          access key storage: 0.001 total access key storage: 0.001,\n          deposits less none FCs: 0.1 total deposits: 0.1 lazy registration: false,\n          deposits for FCs: 0.1 total deposits for FCs: 0.1,\n          uses per key: 1\n          None FCs: 0,\n          length: 1\n          GAS to attach: 100000000000000\n      Log [v2.keypom.near]: New user balance 0.9883428\n      Log [v2.keypom.near]: Fees collected 0\n\n    \n  Auto-Registration Links: \n  \n  https://wallet.near.org/linkdrop/v2.keypom.near/5JesG9FdfuFq3b3PA7p3NPY1SpZvi1DdtPs9ANumx9VRDE5iXyUsMT4Qcn132DFiDNiwjccFyoqAYGYP46UVuTVb\n")),(0,a.kt)("h2",{id:"claiming-the-drop-and-viewing-changes"},"Claiming the Drop and Viewing Changes"),(0,a.kt)("p",null,"For this example, the drop will be claimed with ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.near.org/accounts/keypom-dao-tutorial-member.near"},(0,a.kt)("inlineCode",{parentName:"a"},"keypom-dao-tutorial-member.near")),". The aim will be to auto-register this account into ",(0,a.kt)("a",{parentName:"p",href:"https://near.org/hack.near/widget/DAO.Profile?daoId=keypom-test.sputnik-dao.near"},"MoonDAO"),"."),(0,a.kt)("p",{align:"center"}," ",(0,a.kt)("img",{src:o(9606).default,alt:"explorer claim",width:"80%"})," "),(0,a.kt)("p",null,"After claiming, you can check the DAO policy ",(0,a.kt)("a",{parentName:"p",href:"https://near.org/hack.near/widget/DAO.Profile?daoId=keypom-test.sputnik-dao.near"},"here")," in the ",(0,a.kt)("em",{parentName:"p"},"Policy")," tab. "),(0,a.kt)("p",{align:"center"}," ",(0,a.kt)("img",{src:o(2805).default,alt:"bos policy",width:"80%"})," "),(0,a.kt)("p",null,"\ud83c\udf89 As you can see, ",(0,a.kt)("inlineCode",{parentName:"p"},"keypom-dao-tutorial-member.near")," has automatically been registered into the DAO by simply claiming a linkdrop! \ud83c\udf89"),(0,a.kt)("p",null,"The transaction for this auto-registration can be found ",(0,a.kt)("a",{parentName:"p",href:"https://explorer.near.org/transactions/2z9L9HcFKTJUANMcrQaSQMXsSbPihc472Lk83AgEtszH"},"here"),"."),(0,a.kt)("h3",{id:"additional-viewing-methods"},"Additional Viewing Methods"),(0,a.kt)("p",null,"You can also view the proposal that was created and approved by the DAO bot by using the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"near view keypom-test.sputnik-dao.near get_proposal '{\"id\":9}' \n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Auto-Registration Proposal"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"View call: keypom-test.sputnik-dao.near.get_proposal({\"id\":9})\n{\n  id: 9,\n  proposer: 'dao-bot.keypom.near',\n  description: 'mooooooooon',\n  kind: {\n    AddMemberToRole: {\n      member_id: 'keypom-dao-tutorial-member.near',\n      role: 'new-onboardee-role'\n    }\n  },\n  status: 'Approved',\n  vote_counts: { 'Keypom DAO Bot': [ 1, 0, 0 ] },\n  votes: { 'dao-bot.keypom.near': 'Approve' },\n  submission_time: '1685145461041750017'\n}\n")))),(0,a.kt)("p",null,"The DAO policy can also be checked through the command line as well:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"near view keypom-test.sputnik-dao.near get_policy' \n")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"DAO Policy"),(0,a.kt)("p",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"View call: keypom-test.sputnik-dao.near.get_policy()\n{\n  roles: [\n    { name: 'all', kind: 'Everyone', permissions: [], vote_policy: {} },\n    {\n      name: 'new-onboardee-role',\n      kind:{\n        Group: [\n          'keypom-dao-tutorial-member.near',\n          'minlu.near',\n          'mintlu.near'\n        ]\n      },\n    },\n    ...\n    ...\n  ],\n  default_vote_policy: { weight_kind: 'RoleWeight', quorum: '0', threshold: [ 1, 2 ] },\n  proposal_bond: '100000000000000000000000',\n  proposal_period: '604800000000000',\n  bounty_bond: '100000000000000000000000',\n  bounty_forgiveness_period: '604800000000000'\n}\n")))),(0,a.kt)("h2",{id:"how-you-can-use-dao-bot"},"How You Can Use DAO Bot"),(0,a.kt)("p",null,"This DAO bot contract you just made has been deployed to the account ",(0,a.kt)("inlineCode",{parentName:"p"},"keypom-dao-bot.testnet")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"dao-bot.keypom.near")," and is open for you to use! You can create your own ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/drop#final-code"},"FC drops")," to interface and experiment with it. "),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Prior to using the DAO Bot, ensure that it is given a role in your DAO capable of creating and approving ",(0,a.kt)("inlineCode",{parentName:"p"},"AddMemberToRole")," proposals. For more info, see the ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/architecture#optimizing-the-approach"},"solution architecture"))),(0,a.kt)("p",null,"If you wish to make modifications to the DAO bot, the source code is found ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/keypom/dao-bot"},"here"),". You can modify to your liking and deploy the contract as you see fit. "),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"The following functions have been included in the DAO bot in case you created a drop using older versions of the Keypom contract, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"v1-4.keypom.near"),". Note that you will need to deploy the DAO bot and modify these values yourself."),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-rust"},"pub fn change_keypom_contract(&mut self, new_contract: AccountId)\npub fn view_keypom_contract(&self) -> AccountId\n"))),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"In this tutorial, you learned how you can use a ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/drop"},"Keypom FC drop")," and a newly created ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/daobot"},"DAO bot")," to automatically register new users into your DAO and get the onboarding process started right away. You also learned how to ",(0,a.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/daos/security"},"use ",(0,a.kt)("inlineCode",{parentName:"a"},"keypom_args")," to validate authenticity")," of incoming calls from Keypom drops. "),(0,a.kt)("p",null,"This allows new members to focus on topics and discussions that are DAO specific rather than needing to worry about creating an account and learning the technical jargon of the NEAR blockchain. This onboarding flow also frees up the voting members to focus on the DAOs actual tasks rather than voting to approve new members."))}u.isMDXComponent=!0},6220:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});const n=o.p+"assets/images/bos-showcase-99cff9f1f501da50379aa3e7b1b16e2a.png"},2805:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});const n=o.p+"assets/images/bos-f102aa7cb1663df1f940a5f0da76646a.png"},9606:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});const n=o.p+"assets/images/claim-430284bad2c4df4ef52e5eb2cdae5421.png"}}]);
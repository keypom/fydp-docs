"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[4245],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),o=n(86010);const r={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,i),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),o=n(67294),r=n(86010),i=n(12466),l=n(16550),s=n(91980),p=n(67392),c=n(50012);function u(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function d(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??u(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=d(e),[i,l]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[s,p]=h({queryString:n,groupId:a}),[u,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,c.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),f=(()=>{const e=s??u;return m({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),k(e)}),[p,k,r]),tabValues:r}}var f=n(72389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=p[n].value;a!==l&&(u(t),s(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:i}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},i,{className:(0,r.Z)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":l===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=k(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",g.tabList)},o.createElement(y,(0,a.Z)({},e,t)),o.createElement(b,(0,a.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return o.createElement(N,(0,a.Z)({key:String(t)},e))}},86571:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var a=n(87462),o=(n(67294),n(3905)),r=n(74866),i=n(85162);const l={sidebar_label:"Non Fungible Token Drop"},s="Non Fungible Token Drop",p={unversionedId:"Tutorials/Basics/nft-drops",id:"Tutorials/Basics/nft-drops",title:"Non Fungible Token Drop",description:"Introduction",source:"@site/docs/Tutorials/Basics/nft-drops.md",sourceDirName:"Tutorials/Basics",slug:"/Tutorials/Basics/nft-drops",permalink:"/docs/Tutorials/Basics/nft-drops",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/docs/Tutorials/Basics/nft-drops.md",tags:[],version:"current",frontMatter:{sidebar_label:"Non Fungible Token Drop"},sidebar:"Tutorials",previous:{title:"Simple Drop",permalink:"/docs/Tutorials/Basics/simple-drops"},next:{title:"Fungible Token Drop",permalink:"/docs/Tutorials/Basics/ft-drops"}},c={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating your Project",id:"creating-your-project",level:3},{value:"Breaking Down the Problem",id:"breaking-down-the-problem",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Creating Drop and Transferring NFT",id:"creating-drop-and-transferring-nft",level:2},{value:"Creating Linkdrops",id:"creating-linkdrops",level:2},{value:"Full Solution",id:"full-solution",level:2},{value:"Testing",id:"testing",level:2},{value:"Running the Script",id:"running-the-script",level:3},{value:"Claiming and Explorer Transactions",id:"claiming-and-explorer-transactions",level:3},{value:"Conclusion",id:"conclusion",level:2}],d={toc:u},m="wrapper";function h(e){let{components:t,...l}=e;return(0,o.kt)(m,(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"non-fungible-token-drop"},"Non Fungible Token Drop"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"In this tutorial, you will learn how to create a non-fungible token drop from scratch. This allows you onboard users both with $NEAR and an existing NFT with the click of a link. This is great for sending an NFT that you own to your friends without needing to worry about whether or not they have a NEAR wallet."),(0,o.kt)("p",{align:"center"}," ",(0,o.kt)("img",{src:n(94725).default,alt:"MyNearWallet claim",width:"65%"})," "),(0,o.kt)("p",null,"To learn more about the NFT drop, see the ",(0,o.kt)("a",{parentName:"p",href:"/docs/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/nft-drops"},"concepts page")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"For the basic tutorials, you can choose to run the scripts on your own machine. To do so, you must have the following:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"},"Node JS"),"  "),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://docs.near.org/tools/near-api-js/quick-reference#install"},"NEAR-API-JS"),"  "),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/keypom/keypom-js#getting-started"},"Keypom JS SDK"))),(0,o.kt)("p",null,"With this tutorial, you can either create your own script by following along, or view the completed script available in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/keypom/keypom-docs-examples"},"Keypom Documentation Examples")," repo."),(0,o.kt)("h3",{id:"creating-your-project"},"Creating your Project"),(0,o.kt)("p",null,"In this section, you're going to create your project and install the SDK to prepare for the tutorial. If you have a completed script and have installed the SDK, you can skip ",(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/simple-drops#breaking-down-the-problem"},"forward"),"."),(0,o.kt)("p",null,"First, you need to give your project a home."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir my-keypom-project && cd my-keypom-project\n")),(0,o.kt)("p",null,"Next, you'll want to create a default ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," file using the following command. You can accept all default values."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm init\n")),(0,o.kt)("p",null,"At this point, your project structure should look like this. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"/my-keypom-project\n\u251c\u2500\u2500 package.json\n")),(0,o.kt)("p",null,"If you open ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),", you should see this."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Default package.json"),(0,o.kt)("p",null,(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "name": "my-keypom-project",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n')))),(0,o.kt)("p",null,"The next step is to create an empty JavaScript file."),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"Mac/Lnx",label:"Mac OS/Linux",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"touch nft-keypom.js\n"))),(0,o.kt)(i.Z,{value:"WNDS",label:"Windows",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"fsutil file createnew nft-keypom.js 0\n")))),(0,o.kt)("p",null,"Finally, the last step is to install the Keypom JS SDK."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @keypom/core\n")),(0,o.kt)("p",null,"After installing the SDK, your ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json")," file should now look slightly different."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"package.json after installing the SDK"),(0,o.kt)("p",null,(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'{\n  "name": "my-keypom-project",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC",\n  # highlight-start\n  "dependencies": {\n    "@keypom/core": "^1.0.0"\n  }\n  # highlight-end\n}\n')))),(0,o.kt)("p",null,"With these steps complete, your project folder should look like this. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"/my-keypom-project\n\u251c\u2500\u2500 nft-keypom.js\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 node_modules\n\u2502   \u2514\u2500\u2500 @keypom/core\n\u2502   \u2514\u2500\u2500 ...\n")),(0,o.kt)("p",null,"You are now ready to begin creating your drop!"),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"breaking-down-the-problem"},"Breaking Down the Problem"),(0,o.kt)("p",null,"The process of creating an NFT drop can be broken down into the following steps.  "),(0,o.kt)("p",null,"1) Establish a connection to the NEAR blockchain.",(0,o.kt)("br",{parentName:"p"}),"\n","2) If you don't own the NFT, mint it using the ",(0,o.kt)("inlineCode",{parentName:"p"},"nft_mint")," function.",(0,o.kt)("br",{parentName:"p"}),"\n","3) Create the keys and the drop with the NFT information.",(0,o.kt)("br",{parentName:"p"}),"\n","4) Transfer ownership of the NFTs to Keypom.",(0,o.kt)("br",{parentName:"p"}),"\n","5) Create linkdrops.  "),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"The NFT ownership must be transferred to Keypom so that it can send the NFT to the user when they claim their drop. ")),(0,o.kt)("p",null,"The following skeleton code can be used as a starting point:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// Each of the two methods to create this drop will have their own unique set of imports\n\n// Imports used in the Keypom SDK method:\nconst { initKeypom, createDrop, getEnv, formatLinkdropUrl } = require("@keypom/core");\nconst { parseNearAmount } = require("@near-js/utils");\nconst { UnencryptedFileSystemKeyStore } = require("@near-js/keystores-node");\nconst { Near } = require("@near-js/wallet-account");\nconst { Account } = require("@near-js/accounts");\nconst path = require("path");\nconst homedir = require("os").homedir();\n\n// Imports used in the NEAR-API-JS method:\nconst { parseNearAmount } = require("@near-js/utils");\nconst { KeyPair } = require("@near-js/crypto")\nconst { UnencryptedFileSystemKeyStore } = require("@near-js/keystores-node");\nconst { Near } = require("@near-js/wallet-account");\nconst { Account } = require("@near-js/accounts");\nconst { getRecentDropId } = require("../utils/general.js")\nconst path = require("path");\nconst homedir = require("os").homedir();\n\n\nasync function NFTDropKeypom(){\n// GETTING STARTED\n\n//      STEP 1: Initiate a NEAR connection.\n\n//      STEP 2: Mint NFTs\n\n// CREATING DROP AND TRANSFERRING NFTs\n\n//      STEP 3: Create NFT drop\n\n//      STEP 4: Transfer NFTs to Keypom\n\n// CREATING LINKDROPS\n\n//      STEP 5: Create Linkdrops\n}\n\nNFTDropKeypom()\n')),(0,o.kt)("p",null,'For this tutorial, steps 1 and 2 will be grouped under "',(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/nft-drops#getting-started"},"Getting Started"),'", steps 3 and 4 will be grouped under "',(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/nft-drops#creating-drop-and-transferring-nft"},"Creating drop and transferring NFT"),'", and step 5 will have its own section called "',(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/nft-drops#creating-linkdrops"},"Creating Linkrops"),'".'),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"getting-started"},"Getting Started"),(0,o.kt)("p",null,"In this section, the NEAR blockchain connection is set up and the NFTs will be minted to ensure you are transferring NFTs that ",(0,o.kt)("em",{parentName:"p"},"you")," own. If you already own the NFTs you wish to add to the drop, there is no need to mint them here. "),(0,o.kt)("p",null,"Connecting to the NEAR blockchain will be done using ",(0,o.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," and consists of the following steps:"),(0,o.kt)("p",null,"1) Create a Keystore, which stores your access keys used to sign transactions   "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"select a network, either ",(0,o.kt)("inlineCode",{parentName:"li"},"testnet")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"mainnet"),"  "),(0,o.kt)("li",{parentName:"ul"},"choose a location where the keypairs live, either a folder on your local machine, or in-memory      ")),(0,o.kt)("p",null,"2) Define a NEAR configuration using the Keystore",(0,o.kt)("br",{parentName:"p"}),"\n","3) Use the configuration to initialize a connection to NEAR   "),(0,o.kt)("p",null,"More information about this process can be found ",(0,o.kt)("a",{parentName:"p",href:"https://docs.near.org/tools/near-api-js/quick-reference#key-store"},"here"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"For simplicity, this tutorial will choose a file-based keystore and point to the ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.near-credentials")," folder on your local machine since this is where most of your keys are stored. For more information about KeyStores, visit NEAR's ",(0,o.kt)("a",{parentName:"p",href:"https://docs.near.org/tools/near-api-js/quick-reference#key-store"},"official docs"),".")),(0,o.kt)("p",null,"The code for setting up the NEAR connection and minting the NFT is shown below. In the skeleton code, these are steps 1 and 2."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-example.js#L11-L49\n")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The NFT must be minted with a ",(0,o.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," ",(0,o.kt)("inlineCode",{parentName:"p"},"functionCall")," to the NFT contract."),(0,o.kt)("p",{parentName:"admonition"},"Function arguments for ",(0,o.kt)("inlineCode",{parentName:"p"},"functionCall")," can be found ",(0,o.kt)("a",{parentName:"p",href:"https://docs.near.org/tools/near-api-js/reference/modules/transaction#functioncall"},"here"))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"creating-drop-and-transferring-nft"},"Creating Drop and Transferring NFT"),(0,o.kt)("p",null,"In this section of the tutorial, you'll be creating the NFT drop and transferring the NFT to Keypom using the Keypom SDK."),(0,o.kt)("p",null,"This process starts with calling the ",(0,o.kt)("inlineCode",{parentName:"p"},"initKeypom")," function and will always be the first function you call to interact with the SDK. "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"initKeypom")," initializes the SDK to allow for interactions with the Keypom smart contracts. Without it, none of the other SDK functions would work as expected. If a NEAR connection is not already present, it will initialize a new one for you. More info on the ",(0,o.kt)("inlineCode",{parentName:"p"},"initKeypom")," function can be found ",(0,o.kt)("a",{parentName:"p",href:"/docs/keypom-sdk/Core/modules#initkeypom"},"here"),"."),(0,o.kt)("p",null,"After calling ",(0,o.kt)("inlineCode",{parentName:"p"},"initKeypom"),", the NFT Drop is created. This is done by calling ",(0,o.kt)("inlineCode",{parentName:"p"},"createDrop")," and adding an ",(0,o.kt)("inlineCode",{parentName:"p"},"nftData")," parameter."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Recall that the private keys being generated using ",(0,o.kt)("inlineCode",{parentName:"p"},"createDrop")," are used to store the assets. These keys are then embedded within a link."),(0,o.kt)("p",{parentName:"admonition"},"In an NFT Drop, the assets consist of an NFT and optional $NEAR.")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"nftData")," is an object with the following properties."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"nftData\n\u251c\u2500\u2500 contractId\n\u251c\u2500\u2500 senderId\n\u251c\u2500\u2500 tokenIds\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"contractId"),": The contract ID where the NFTs for this drop are coming from"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"senderId"),": The current owner of the NFTs that will be sent to Keypom"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tokenIds"),": A list of all the token IDs to be sent to Keypom during the NFT drop creation process. ")),(0,o.kt)("p",null,"Including the ",(0,o.kt)("inlineCode",{parentName:"p"},"nftData")," parameter categorizes this as an NFT drop. Without it, the Keypom Protocol would treat this drop as a Simple Drop."),(0,o.kt)("p",null,"More information on the ",(0,o.kt)("inlineCode",{parentName:"p"},"nftData")," parameter can be found ",(0,o.kt)("a",{parentName:"p",href:"/docs/keypom-sdk/Core/interfaces/NFTData"},"here"),"."),(0,o.kt)("p",null,"To see what the SDK is doing behind the scenes, a ",(0,o.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," equivalent NodeJS script has been provided."),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"KPJS",label:"\ud83d\udd11 Keypom SDK",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-example.js#L51-L74\n"))),(0,o.kt)(i.Z,{value:"NRJS",label:"\ud83d\udcbb NEAR-API-JS",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-near-example.js#L52-L101\n")))),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"All function parameters and default values for the SDK and Keypom functions can be found in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/keypom-sdk/Core/modules"},"SDK Typedocs"),". For ",(0,o.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," functions, their arguments can be found ",(0,o.kt)("a",{parentName:"p",href:"https://docs.near.org/tools/near-api-js/reference"},"here"))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"creating-linkdrops"},"Creating Linkdrops"),(0,o.kt)("p",null,"The last step in this process is to create the links themselves so that you can easily distribute the assets to people. This is done by embedding the private key, containing the $NEAR, into the link along with the Keypom contract ID.  "),(0,o.kt)("p",null,"With the Keypom SDK, this is all neatly wrapped up in the function ",(0,o.kt)("a",{parentName:"p",href:"/docs/keypom-sdk/Core/modules#formatlinkdropurl"},(0,o.kt)("inlineCode",{parentName:"a"},"formatLinkdropUrl")),". You just need to provide the base URL format and the private key you wish to embed."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-example.js#L76-L82\n")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"full-solution"},"Full Solution"),(0,o.kt)("p",null,"Now that everything has been put together, the final code can be seen below."),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"KPJS",label:"\ud83d\udd11 Keypom SDK",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-example.js#L1-L89\n"))),(0,o.kt)(i.Z,{value:"NRJS",label:"\ud83d\udcbb NEAR-API-JS",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/8202f0ef88205bfca644ccf5d4d3cfb460f88f15/basic-tutorials/non-fungible-token-drop/nft-near-example.js#L1-L114\n")))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"testing"},"Testing"),(0,o.kt)("h3",{id:"running-the-script"},"Running the Script"),(0,o.kt)("p",null,"Here, you'll learn how to run the code that was just covered, and what to expect."),(0,o.kt)("p",null,"To view the completed code, clone the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/keypom/keypom-docs-examples"},"Keypom Docs Examples")," repository and navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"basic-tutorials/nft-drop"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/keypom/keypom-docs-examples.git && cd keypom-docs-examples/basic-tutorials/nft-drop\n")),(0,o.kt)("p",null,"From there, you can and open the ",(0,o.kt)("inlineCode",{parentName:"p"},"nft-example.js")," file."),(0,o.kt)("p",null,"To run the code you just cloned, return to the ",(0,o.kt)("inlineCode",{parentName:"p"},"keypom-docs-examples")," directory and install all the necessary packages. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd .. && cd .. && yarn\n")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Prior to running these scripts, ensure you replace all instances of ",(0,o.kt)("inlineCode",{parentName:"p"},"keypom-docs-demo.testnet")," in the script with the credentials of your account found in your ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.near-credentials")," folder")),(0,o.kt)("p",null,"From there, you run this NFT Drop script that was made in this tutorial using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn basic:nft:keypom\n")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The SDK script is being tested here; use ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn basic:nft:naj")," to test the ",(0,o.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," script instead.")),(0,o.kt)("p",null,"This should return a successful drop creation and console log a Public Key and Linkdrop: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Public Keys:  [ 'ed25519:Cf48tjtLrRDm5qYN5fyNvPHBTNVkSsX2mP2mfw2W2f3N' ]\nLinkdrops:  [\n  'https://testnet.mynearwallet.com/linkdrop/v2.keypom.testnet/4iBKGBMhKo3BLi8wfc6qDPxUG3xrsXygDbzVwXBsh3tEvLVE2a4EGDtHreH89a7peAhC8yot1Zm5vd3nfnxxmzv4'\n]\nKeypom Contract Explorer Link: explorer.testnet.near.org/accounts/v2.keypom.testnet.com\n")),(0,o.kt)("p",null,"To see the full console log from this drop creation, see the expandable section below."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Console Log of Test"),(0,o.kt)("p",null,(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'Receipts: 94Hxiw6dy2VbgfWWuL8scyAKutgmZ6TnyaGLuSdw8bdw, EPBCevWD8jCmVmRhH4r7nEWY5P5mHNXBzxRs8FFmjh1s\n        Log [nft.examples.testnet]: EVENT_JSON:{"standard":"nep171","version":"nft-1.0.0","event":"nft_mint","data":[{"owner_id":"keypom-docs-demo.testnet","token_ids":["keypom-token-1682351707371"]}]}\nReceipts: 8VKpVfRZkPBJzZR42aBiytbECXFYqAvLF72jRUgaccHt, AV5tmBbWuzkV7DLNX6o4LgkeBysShJ647VmdY3ye15s\n        Log [v2.keypom.testnet]: Current Block Timestamp: 1682351728091701553\n        Log [v2.keypom.testnet]: 21 calls with 105000000000000 attached GAS. Pow outcome: 1.8602935. Required Allowance: 20248156910387200000000\n        Log [v2.keypom.testnet]: Total required storage Yocto 12140000000000000000000\n        Log [v2.keypom.testnet]: Current balance: 8.2333838, \n            Required Deposit: 1.0333881, \n            total_required_storage: 0.01214,\n            Drop Fee: 0, \n            Key Fee: 0 Total Key Fee: 0,\n            allowance: 0.0202481 total allowance: 0.0202481,\n            access key storage: 0.001 total access key storage: 0.001,\n            deposits less none FCs: 1 total deposits: 1 lazy registration: false,\n            deposits for FCs: 0 total deposits for FCs: 0,\n            uses per key: 1\n            None FCs: 0,\n            length: 1\n            GAS to attach: 100000000000000\n        Log [v2.keypom.testnet]: New user balance 7.1999957\n        Log [v2.keypom.testnet]: Fees collected 0\nReceipts: HwvpQcMKQdWczLsbBsvZD72UdJTpY6BTDPZBFwk7YZFy, DGs58AziaMcgkZbhki2caZBAFC6fYa83qXfziQmmwaeU, 3zs1apRpLhdfYpdRJUidgP8YJzkPr2YKaoVT8Hitau5p\n        Log [nft.examples.testnet]: EVENT_JSON:{"standard":"nep171","version":"nft-1.0.0","event":"nft_transfer","data":[{"old_owner_id":"keypom-docs-demo.testnet","new_owner_id":"v2.keypom.testnet","token_ids":["keypom-token-1682351707371"]}]}\nReceipt: 4HJAWvH67JtsdDVQP1vsRTniFwkALWokPRpkPbMxqArY\n        Log [nft.examples.testnet]: drop.registered_uses 1\n        Log [nft.examples.testnet]: Subtracting 1110000000000000000000 from funder to cover storage. New balance is 7198885721113380930000000\nPublic Keys:  [ \'ed25519:Cf48tjtLrRDm5qYN5fyNvPHBTNVkSsX2mP2mfw2W2f3N\' ]\nLinkdrops:  [\n  \'https://testnet.mynearwallet.com/linkdrop/v2.keypom.testnet/4iBKGBMhKo3BLi8wfc6qDPxUG3xrsXygDbzVwXBsh3tEvLVE2a4EGDtHreH89a7peAhC8yot1Zm5vd3nfnxxmzv4\'\n]\nKeypom Contract Explorer Link: explorer.testnet.near.org/accounts/v2.keypom.testnet.com\n')))),(0,o.kt)("h3",{id:"claiming-and-explorer-transactions"},"Claiming and Explorer Transactions"),(0,o.kt)("p",null,"Once you click the link, it will take you to the following NEAR Wallet page, where you will have the choice to claim with an existing account or create a new one.  "),(0,o.kt)("p",{align:"center"}," ",(0,o.kt)("img",{src:n(81389).default,alt:"Near Wallet claim",width:"80%"})," "),(0,o.kt)("p",null,"After the claim transaction succeeds, you can view the NFT in your collectibles tab."),(0,o.kt)("p",{align:"center"}," ",(0,o.kt)("img",{src:n(94725).default,alt:"NFT collectibles claim",width:"65%"})," "),(0,o.kt)("p",null,"To check the transactions, click the final link in the console log when you run the script."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Keypom Contract Explorer Link: https://explorer.testnet.near.org/accounts/v2.keypom.testnet \n")),(0,o.kt)("p",null,"From there, you should be able to see the ",(0,o.kt)("a",{parentName:"p",href:"https://explorer.testnet.near.org/transactions/9rR6mPjoQFKC2Euuvn5yh5e6hPv3WTrMYjwja3ppkjaD"},(0,o.kt)("inlineCode",{parentName:"a"},"create_drop")),", ",(0,o.kt)("a",{parentName:"p",href:"https://explorer.testnet.near.org/transactions/A2hdnm6mHQNLupFLP1vMNZ1J8QHkxLqDLqocUnQxNC5F"},(0,o.kt)("inlineCode",{parentName:"a"},"nft_transfer_call"))," and ",(0,o.kt)("a",{parentName:"p",href:"https://explorer.testnet.near.org/transactions/5Kx9F5nxjbWpq8qUr7rRuDun8zipvR7TFbVuPoP5qwBW"},(0,o.kt)("inlineCode",{parentName:"a"},"claim"))," transactions. "),(0,o.kt)("p",{align:"center"}," ",(0,o.kt)("img",{src:n(18748).default,alt:"explorer transactions",width:"80%"})," "),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Recall that ",(0,o.kt)("inlineCode",{parentName:"p"},"nft_transfer_call")," is never explicitly called but rather ",(0,o.kt)("inlineCode",{parentName:"p"},"createDrop")," calls it for you; this can be seen in the explorer shown above. "),(0,o.kt)("p",{parentName:"admonition"},"This is the SDK in action!")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"In this NFT tutorial, you learned about the steps needed while ",(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/nft-drops#getting-started"},"initializing an NFT drop")," and the process of ",(0,o.kt)("a",{parentName:"p",href:"/docs/Tutorials/Basics/nft-drops#creating-drop-and-transferring-nft"},"creating the NFT drop"),". Once the drop was created, you constructed a valid linkdrop using the private keys in order to claim the assets."),(0,o.kt)("p",null,"In the next tutorial, you will learn how to create a Fungible Token drop, which is similar to the NFT drop, but transfers FTs instead of NFTs."))}h.isMDXComponent=!0},94725:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/collectibles-claimed2-b1926b652e8327d362cbe2a1880d9c35.png"},18748:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/explorer-06022dc79de4e0114126e951b6e2a473.png"},81389:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});const a=n.p+"assets/images/nw-claim-c99a7df41f5f1155a431f11d311b53a8.png"}}]);
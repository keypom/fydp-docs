"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[572],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},k=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),k=a,m=p["".concat(s,".").concat(k)]||p[k]||u[k]||i;return n?o.createElement(m,r(r({ref:t},d),{},{components:n})):o.createElement(m,r({ref:t},d))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=k;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}k.displayName="MDXCreateElement"},92454:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=n(87462),a=(n(67294),n(3905));const i={sidebar_label:"View Event Analytics"},r="View Event Analytics",l={unversionedId:"Tutorials/Advanced/ticketing/analytics",id:"Tutorials/Advanced/ticketing/analytics",title:"View Event Analytics",description:"Introduction",source:"@site/docs/Tutorials/Advanced/ticketing/analytics.md",sourceDirName:"Tutorials/Advanced/ticketing",slug:"/Tutorials/Advanced/ticketing/analytics",permalink:"/docs/Tutorials/Advanced/ticketing/analytics",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/docs/Tutorials/Advanced/ticketing/analytics.md",tags:[],version:"current",frontMatter:{sidebar_label:"View Event Analytics"},sidebar:"Tutorials",previous:{title:"Final Product",permalink:"/docs/Tutorials/Advanced/ticketing/final"},next:{title:"\ud83d\ude80 BOS Version",permalink:"/docs/Tutorials/Advanced/ticketing/bos-tool"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Connecting to NEAR",id:"connecting-to-near",level:2},{value:"Getting Drop and Keys",id:"getting-drop-and-keys",level:2},{value:"Compiling Data",id:"compiling-data",level:2},{value:"Conclusion",id:"conclusion",level:2}],d={toc:c},p="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"view-event-analytics"},"View Event Analytics"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"In this section you'll learn how to track your event's analytics, such as number of attendees that showed up, those that claimed POAPs and more! This can be broken down into two approaches:"),(0,a.kt)("p",null,"1) Creating a script.",(0,a.kt)("br",{parentName:"p"}),"\n","2) Using existing BOS tools.  "),(0,a.kt)("p",null,"The focus for now will be the script. The next tutorial section will showcase the existing BOS tools. "),(0,a.kt)("p",null,"Starting at the ",(0,a.kt)("inlineCode",{parentName:"p"},"keypom-docs-examples")," directory, navigate to the ",(0,a.kt)("inlineCode",{parentName:"p"},"ticket-app-skeleton/others")," folder and open the ",(0,a.kt)("inlineCode",{parentName:"p"},"event-analytics.js")," file. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd advanced-tutorials/ticket-app-skeleton/others\n")),(0,a.kt)("p",null,"There, you can see the following skeleton code in the file ",(0,a.kt)("inlineCode",{parentName:"p"},"event-analytics.js"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/449992de80888934dcbccfadefd88601d9d6638d/advanced-tutorials/ticket-app-skeleton/others/event-analytics.js#L1-L31\n")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"connecting-to-near"},"Connecting to NEAR"),(0,a.kt)("p",null,"Connecting to the NEAR network is done with ",(0,a.kt)("inlineCode",{parentName:"p"},"NEAR-API-JS")," and consists of:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Selecting which network to connect to (testnet or mainnet).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Specifying the location where the keys are stored for the drop funder's account. This location is commonly in the ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.near-credentials")," folder on your local machine."))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/449992de80888934dcbccfadefd88601d9d6638d/advanced-tutorials/ticket-app/others/event-analytics.js#L21-L38\n")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"getting-drop-and-keys"},"Getting Drop and Keys"),(0,a.kt)("p",null,"Here, you want to make sure you get the proper drop that represents your event. To do this, you want to use the drop's ",(0,a.kt)("inlineCode",{parentName:"p"},"dropId"),". In order to include the keys in the returned data, ensure that ",(0,a.kt)("inlineCode",{parentName:"p"},"withKeys")," is true."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/449992de80888934dcbccfadefd88601d9d6638d/advanced-tutorials/ticket-app/others/event-analytics.js#L42-L55\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you don't have your ",(0,a.kt)("inlineCode",{parentName:"p"},"dropId"),", you can use a key from the drop as well. This is done by passing in either ",(0,a.kt)("inlineCode",{parentName:"p"},"publicKey")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"secretKey")," into ",(0,a.kt)("inlineCode",{parentName:"p"},"getDropInformation"))),(0,a.kt)("p",null,"The total number of tickets can also be found by using the drop's ",(0,a.kt)("inlineCode",{parentName:"p"},"next_key_id"),". This will be helpful to determine how many keys have been fully claimed"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"compiling-data"},"Compiling Data"),(0,a.kt)("p",null,"From the original ",(0,a.kt)("a",{parentName:"p",href:"/docs/Tutorials/Advanced/ticketing/architecture#keypom-solution"},"design of the ticket drop"),", you know the following."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The first key use indicates when an attendee is scanned into the event. "),(0,a.kt)("li",{parentName:"ul"},"The second key use sends the attendee a POAP, after which the key is deleted")),(0,a.kt)("p",null,"From this, you can derive the following about a key's ",(0,a.kt)("a",{parentName:"p",href:"/docs/keypom-sdk/Core/interfaces/ProtocolReturnedKeyInfo#remaining_uses"},"remaining uses"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"remaining_uses == 2"),": the ticket has not yet been scanned, hence the ticket holder did not attend. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"remaining_uses == 1"),": the attendee was scanned in and thus attended")),(0,a.kt)("p",null,"Notice how there is no case for when ",(0,a.kt)("inlineCode",{parentName:"p"},"remaining_uses")," = 0. This is because when keys are fully used, they are deleted. This is when collecting the total number of keys above becomes helpful. The number of fully used keys can be found by subtracting the number of found keys from the total."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"drop.next_key_id - keys.length")," = number of fully used keys. ")),(0,a.kt)("p",null,"All this can be put into the following code block."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-docs-examples/blob/449992de80888934dcbccfadefd88601d9d6638d/advanced-tutorials/ticket-app/others/event-analytics.js#L57-L73\n")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"In this short bonus section, you saw how to get analytics for your events. This consisted of getting the keys from your drop and keeping track of the number of remaining uses for each key. "),(0,a.kt)("p",null,"In the following section, you'll see some pre-built BOS tooling for a no-code solution!"))}u.isMDXComponent=!0}}]);
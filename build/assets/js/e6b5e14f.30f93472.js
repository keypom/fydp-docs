"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[4766],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),u=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(i.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,h=p["".concat(i,".").concat(m)]||p[m]||d[m]||r;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:o,l[1]=s;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(7294),o=n(6010);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:n,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,l),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(7462),o=n(7294),r=n(6010),l=n(2466),s=n(6550),i=n(1980),u=n(7392),c=n(12);function p(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function d(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=d(e),[l,s]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[i,u]=h({queryString:n,groupId:a}),[p,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,c.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),y=(()=>{const e=i??p;return m({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var y=n(2389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:s,selectValue:i,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,l.o5)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==s&&(p(t),i(a))},m=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:l}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:d},l,{className:(0,r.Z)("tabs__item",k.tabItem,l?.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function g(e){const t=f(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",k.tabList)},o.createElement(b,(0,a.Z)({},e,t)),o.createElement(v,(0,a.Z)({},e,t)))}function w(e){const t=(0,y.Z)();return o.createElement(g,(0,a.Z)({key:String(t)},e))}},1844:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>p});var a=n(7462),o=(n(7294),n(3905)),r=n(4866),l=n(5162);const s={sidebar_label:"Public Sale Configurations"},i="Public Sale Configurations",u={unversionedId:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization",id:"version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization",title:"Public Sale Configurations",description:"The public sale configuration gives the funder the ability to sell access keys in their drop with a variety of configurable behaviors such as the price, or a dedicated allowlist.",source:"@site/versioned_docs/version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization.md",sourceDirName:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops",slug:"/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/versioned_docs/version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/sale-customization.md",tags:[],version:"2.0",frontMatter:{sidebar_label:"Public Sale Configurations"},sidebar:"Concepts",previous:{title:"Usage Configurations",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization"},next:{title:"Password Protected Keys",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/password-protect"}},c={},p=[{value:"Use cases",id:"use-cases",level:2},{value:"Maximum Number of Keys",id:"maximum-number-of-keys",level:2},{value:"Use case",id:"use-case",level:3},{value:"Price per Key",id:"price-per-key",level:2},{value:"Use case",id:"use-case-1",level:3},{value:"Allowlist",id:"allowlist",level:2},{value:"Use case",id:"use-case-2",level:3},{value:"Blocklist",id:"blocklist",level:2},{value:"Use case",id:"use-case-3",level:3},{value:"Auto-Withdraw Funds",id:"auto-withdraw-funds",level:2},{value:"Use case",id:"use-case-4",level:3},{value:"Start",id:"start",level:2},{value:"Use case",id:"use-case-5",level:3},{value:"End",id:"end",level:2},{value:"Use case",id:"use-case-6",level:3},{value:"Example Public Sale Configuration",id:"example-public-sale-configuration",level:2}],d={toc:p},m="wrapper";function h(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"public-sale-configurations"},"Public Sale Configurations"),(0,o.kt)("p",null,"The public sale configuration gives the funder the ability to sell access keys in their drop with a variety of configurable behaviors such as the price, or a dedicated allowlist.  "),(0,o.kt)("h2",{id:"use-cases"},"Use cases"),(0,o.kt)("p",null,"Public sales of access keys allow for a wide range of easier to create and more interactive events. This is done by letting you:  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Set up an extremely cheap, exclusive event. This event can host an infinite amount of people and the cost of ticketing would be ~0.05 $NEAR."),(0,o.kt)("li",{parentName:"ul"},"Sell access to gated function calls. For example, you can have an exclusive guest-book contract where users that signed it gained access to a VIP meet and greet with a famous artist.  "),(0,o.kt)("li",{parentName:"ul"},"Introduce FIAT payments for your users when they purchase an access key; opening up your tickets, onboardings, and NFT drops to a whole new audience.  ")),(0,o.kt)("p",null,"The sale configurations are outlined below."),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"KPJS",label:"\ud83d\udd11 Keypom SDK",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-js/blob/29c10f949f02f673d4a3cecc21b0f74bca600075/src/lib/types/drops.ts#L159-L187\n"))),(0,o.kt)(l.Z,{value:"KP",label:"\ud83d\udcda Protocol",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust",metastring:"reference",reference:!0},"https://github.com/keypom/keypom/blob/7a654aa847f2ce9dedf65755c6a08817eece4666/contract/src/models/json_types.rs#L86-L113\n")))),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"maximum-number-of-keys"},"Maximum Number of Keys"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None"),"  "),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"max_num_keys")," parameter dictates the maximum number of keys that can be added to a drop. By default, there is no limit. Using this can help create scarcity, or abide by venue capacities. "),(0,o.kt)("h3",{id:"use-case"},"Use case"),(0,o.kt)("p",null,"Pretend you are hosting an exclusive talk for your dApp and want to limit the attendance 1000 people. "),(0,o.kt)("p",null,"In this scenario, you could configure the drop to have ",(0,o.kt)("inlineCode",{parentName:"p"},"max_num_keys = 1000")," in order to ensure any keys beyond 1000 cannot be bought and added to the drop.  "),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"price-per-key"},"Price per Key"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None, the keys are free"),"  "),(0,o.kt)("p",null,"This ",(0,o.kt)("inlineCode",{parentName:"p"},"price_per_key")," parameter defines the price for purchasing a key. "),(0,o.kt)("h3",{id:"use-case-1"},"Use case"),(0,o.kt)("p",null,"This parameter can be changed based on your needs. For example, if you are running a charity event and want to bring in as many attendees as possible, you would leave both ",(0,o.kt)("inlineCode",{parentName:"p"},"price_per_key = 0")," and  ",(0,o.kt)("inlineCode",{parentName:"p"},"max_num_keys")," undefined. This would mean there is no limit on the number of ",(0,o.kt)("em",{parentName:"p"},"free")," keys that can be added to the drop. "),(0,o.kt)("p",null,"Alternatively, if you are looking to earn money with your event, you can choose to set ",(0,o.kt)("inlineCode",{parentName:"p"},"price_per_key")," to whatever you see fit. This value is expressed in yoctoNEAR."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"allowlist"},"Allowlist"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None, anyone can add keys to the drop"),"  "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Allowlist")," specifies a group of users that can add keys to the drop using their ",(0,o.kt)("inlineCode",{parentName:"p"},"accountID"),". For example, if ",(0,o.kt)("inlineCode",{parentName:"p"},"allowlist = [benji.testnet, minqi.testnet]"),", then only ",(0,o.kt)("inlineCode",{parentName:"p"},"benji.testnet")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"minqi.testnet")," can add keys to the drop. "),(0,o.kt)("p",null,"If left undefined, anybody can add keys to the drop."),(0,o.kt)("h3",{id:"use-case-2"},"Use case"),(0,o.kt)("p",null,"In this example, pretend you are running a concert for only your closest friends. To do this, you would set ",(0,o.kt)("inlineCode",{parentName:"p"},"allowlist")," to be a vector of their NEAR ",(0,o.kt)("inlineCode",{parentName:"p"},"accountID"),"'s. This way, you can take comfort in knowing that your friends will be the only ones with tickets to the event.  "),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"blocklist"},"Blocklist"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None, nobody is blocked"),"  "),(0,o.kt)("p",null,"Contrary to the ",(0,o.kt)("inlineCode",{parentName:"p"},"allowlist"),", the ",(0,o.kt)("inlineCode",{parentName:"p"},"blocklist")," specifies those that are blocked from adding keys to the drop. This is empty by default, meaning nobody is blocked."),(0,o.kt)("p",null,"Note that the ",(0,o.kt)("inlineCode",{parentName:"p"},"blocklist")," takes precedent over the ",(0,o.kt)("inlineCode",{parentName:"p"},"allowlist"),". This means that if you are on both lists, you will be blocked. "),(0,o.kt)("h3",{id:"use-case-3"},"Use case"),(0,o.kt)("p",null,"Lets pretend that you are running a concert but there are known ticket scalpers in the community. To prevent keys from being scalped and ensure your true fans get tickets to your concert, you can add the NEAR ",(0,o.kt)("inlineCode",{parentName:"p"},"accountID"),"'s of the scalpers to the ",(0,o.kt)("inlineCode",{parentName:"p"},"blocklist")," vector.   "),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"auto-withdraw-funds"},"Auto-Withdraw Funds"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: False, revenues go to funder's Keypom Balance"),"  "),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"auto_withdraw_funds")," parameter dictates where revenue from key sales will go. Every time a key is sold, the revenue will automatically be sent to one of two places:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"the funder's Keypom balance  "),(0,o.kt)("li",{parentName:"ol"},"the funder's NEAR wallet  ")),(0,o.kt)("p",null,"By default, the revenue will go to the funder's Keypom balance. If ",(0,o.kt)("inlineCode",{parentName:"p"},"auto_withdraw_funds = true"),", the revenue generated will be sent to the funder's NEAR wallet. "),(0,o.kt)("h3",{id:"use-case-4"},"Use case"),(0,o.kt)("p",null,"Let's say you are an event promoter who is new to NEAR. You realize that you are only going to use Keypom for a single event."),(0,o.kt)("p",null,"In this scenario, rather than sending revenues to your Keypom balance and then needing to manually withdraw it once the event is over, you can set ",(0,o.kt)("inlineCode",{parentName:"p"},"auto_withdraw_funds = true")," while creating the drop in order to guarantee that the revenues will go to your NEAR wallet automatically.  "),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"start"},"Start"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None, keys can be added immediately"),"  "),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"start")," parameter dictates when keys can be purchased and added to the drop. Similar to ",(0,o.kt)("a",{parentName:"p",href:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization"},"time configurations"),", this is measured in non-leap-nanoseconds since January 1, 1970 0:00:00 UTC. A sample configuration is made available below. "),(0,o.kt)("h3",{id:"use-case-5"},"Use case"),(0,o.kt)("p",null,"Pretend you are an event coordinator for a popular event and have a limited capacity. To ensure fairness, you set a date and time for the sale to begin and let all your users know."),(0,o.kt)("p",null,"To do this, you can configure the ",(0,o.kt)("inlineCode",{parentName:"p"},"start")," parameter.  "),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"end"},"End"),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Default: None, keys can be added indefinitely"),"  "),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"end")," parameter defines when keys can no longer be purchased and added to the drop. "),(0,o.kt)("h3",{id:"use-case-6"},"Use case"),(0,o.kt)("p",null,"For an upcoming event, you want to create a pre-sale of tickets for dedicated fans. To do this you can create a drop, separate from the main ticket sale, that begins early and ends before the general admission tickets go on sale. "),(0,o.kt)("p",null,"To do this, you can configure the ",(0,o.kt)("inlineCode",{parentName:"p"},"end")," parameter."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"example-public-sale-configuration"},"Example Public Sale Configuration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'const ONE_SECOND_NS = 1e9;\n\npub_sale: {\n    // Maximum of 100 Keys\n    max_num_key: 100,\n\n    // 1 $NEAR per key\n    price_per_key: parseNearAmount("1"),\n\n    // only allow benji.testnet and minqi.testnet to add keys\n    allowlist: ["benji.testnet", "minqi.testnet"],\n\n    // don\'t allow boogieman.testnet to add keys\n    blocklist: ["boogieman.testnet"],\n\n    // send revenue back to funder\'s NEAR wallet\n    auto_withdraw_funds: true,\n\n    // start 5 minutes from now\n    start: (Date.now() * 1000000) + ONE_SECOND_NS * 300,\n\n    // end 15 minutes from now\n    end: (Date.now() * 1000000) + ONE_SECOND_NS * 900\n}\n\n')))}h.isMDXComponent=!0}}]);
"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[4073],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),d=r,f=p["".concat(l,".").concat(d)]||p[d]||m[d]||o;return n?a.createElement(f,i(i({ref:t},c),{},{components:n})):a.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),r=n(86010);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,i),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(87462),r=n(67294),o=n(86010),i=n(12466),s=n(16550),l=n(91980),u=n(67392),c=n(50012);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function m(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=m(e),[i,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,u]=f({queryString:n,groupId:a}),[p,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Nk)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),y=(()=>{const e=l??p;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),h(e)}),[u,h,o]),tabValues:o}}var y=n(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.o5)(),m=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==s&&(p(t),l(a))},d=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:m},i,{className:(0,o.Z)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":s===t})}),n??t)})))}function g(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function v(e){const t=h(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",b.tabList)},r.createElement(k,(0,a.Z)({},e,t)),r.createElement(g,(0,a.Z)({},e,t)))}function w(e){const t=(0,y.Z)();return r.createElement(v,(0,a.Z)({key:String(t)},e))}},15395:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>f,frontMatter:()=>s,metadata:()=>u,toc:()=>p});var a=n(87462),r=(n(67294),n(3905)),o=n(74866),i=n(85162);const s={sidebar_label:"Time Configurations"},l="Time Configurations",u={unversionedId:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization",id:"version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization",title:"Time Configurations",description:"Time configurations are particularly useful in defining limits on when a key may be used. This can have a wide range of applications from Subscriptions to Ticketing.",source:"@site/versioned_docs/version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization.md",sourceDirName:"Concepts/KeypomProtocol/GithubReadme/TypesOfDrops",slug:"/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization",draft:!1,editUrl:"https://github.com/keypom/keypom-docs/tree/main/versioned_docs/version-2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization.md",tags:[],version:"2.0",frontMatter:{sidebar_label:"Time Configurations"},sidebar:"Concepts",previous:{title:"Drop Configurations",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/drop-customization"},next:{title:"Usage Configurations",permalink:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/usage-customization"}},c={},p=[{value:"Start",id:"start",level:2},{value:"Use case",id:"use-case",level:3},{value:"End",id:"end",level:2},{value:"Use case",id:"use-case-1",level:3},{value:"Throttle",id:"throttle",level:2},{value:"Use case",id:"use-case-2",level:3},{value:"Interval",id:"interval",level:2},{value:"Use case",id:"use-case-3",level:3},{value:"Example Time Configuration",id:"example-time-configuration",level:2}],m={toc:p},d="wrapper";function f(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"time-configurations"},"Time Configurations"),(0,r.kt)("p",null,"Time configurations are particularly useful in defining limits on ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"when"))," a key may be used. This can have a wide range of applications from ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/subscriptions/introduction"},"Subscriptions")," to ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.0/Tutorials/Advanced/ticketing/introduction"},"Ticketing"),"."),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"KPJS",label:"\ud83d\udd11 Keypom SDK",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"reference",reference:!0},"https://github.com/keypom/keypom-js/blob/29c10f949f02f673d4a3cecc21b0f74bca600075/src/lib/types/drops.ts#L87-L112\n"))),(0,r.kt)(i.Z,{value:"KP",label:"\ud83d\udcda Protocol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust",metastring:"reference",reference:!0},"https://github.com/keypom/keypom/blob/7a654aa847f2ce9dedf65755c6a08817eece4666/contract/src/models/drop_model.rs#L89-L108\n")))),":::tip All these time parameters are measured in non-leap-nanoseconds and can be tricky to work with. An example struct has been provided [below](/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/time-customization). :::",(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"start"},"Start"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: none, Keys can be used anytime"),"  "),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Start")," time is useful for any drops where you intend to restrict access until a certain time. Setting a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," time effectively sets an activation time; a time where the keys become usable afterwards. Before a ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," time is reached, if a user tries to ",(0,r.kt)("inlineCode",{parentName:"p"},"claim")," the key or use ",(0,r.kt)("inlineCode",{parentName:"p"},"create_account_and_claim"),", it will not work. "),(0,r.kt)("h3",{id:"use-case"},"Use case"),(0,r.kt)("p",null,"Let's say you are running a concert, and you want to give fans exclusive access using preferred and general admission tickets. Those with preferred admission tickets can enter anytime, even when the band is setting up. General admission, on the other hand, may only enter once the band is set up. "),(0,r.kt)("p",null,"In this case, you would hand out general admission tickets with a start time in the time configurations and another set of preferred admission tickets with an earlier start time in the time configurations."),(0,r.kt)("p",null,"To do this, you would need to create two drops, one for preferred admission and another for general admission. This is because, as covered in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.0/Concepts/KeypomProtocol/GithubReadme/TypesOfDrops/customization-homepage"},"Drop Configurations Introduction"),", one set of configurations will apply to ",(0,r.kt)("strong",{parentName:"p"},"all")," keys in that drop. "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"end"},"End"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: none, Keys can be used anytime"),"  "),(0,r.kt)("p",null,"The end parameter acts as a deactivation time. This means that once the end time is reached, all the keys in the drop will be deactivated and can no longer be used. "),(0,r.kt)("h3",{id:"use-case-1"},"Use case"),(0,r.kt)("p",null,"Let's pretend that you are at NEARCON representing an NFT marketplace looking to onboard users onto your platform. Your strategy is to offer an exclusive NFT to users that sign up during NEARCON. "),(0,r.kt)("p",null,"To do this, you hand out QR codes with an NFT drop embedded in the QR code during the event. To ensure that the users sign up ",(0,r.kt)("em",{parentName:"p"},"during")," NEARCON, you set the drop configuration's ",(0,r.kt)("inlineCode",{parentName:"p"},"end")," parameter to be the end of NEARCON. "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"throttle"},"Throttle"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: none, Keys can be used anytime"),"  "),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"throttle")," parameter controls how much time must pass between key uses. This works great if you want to control how frequently somebody is able to claim their assets. "),(0,r.kt)("h3",{id:"use-case-2"},"Use case"),(0,r.kt)("p",null,"Pretend you are running an NFT raffle for your latest creation, the MoonNFT. For this raffle, the 20th person claiming their key will be the winner and will receive their own personalized MoonNFT. "),(0,r.kt)("p",null,"To protect again spam and ensure a fair playing field, you can configure the drop to have a 5 minute cooldown using the ",(0,r.kt)("inlineCode",{parentName:"p"},"throttle")," parameter. This way, a contestant cannot spam claim the key to increase their odds of winning. "),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"interval"},"Interval"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Default: none, Keys can be used anytime"),"  "),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"interval")," parameter is similar to the ",(0,r.kt)("inlineCode",{parentName:"p"},"throttle")," parameter but uses the  ",(0,r.kt)("inlineCode",{parentName:"p"},"start")," time as a constant reference. This means if ",(0,r.kt)("inlineCode",{parentName:"p"},"interval")," is every week, the key will become useable on the same day every week, regardless of when the last key use was. "),(0,r.kt)("h3",{id:"use-case-3"},"Use case"),(0,r.kt)("p",null,"Pretend you have a subscription to Moon's ",(0,r.kt)("strong",{parentName:"p"},"weekly")," dog biscuit delivery service that charges you every Monday. Due to all the horror stories of data breaches and identity theft, you now no longer give out your credit card information. For this reason, you wish to pay with $NEAR but the current linkdrop standard does not allow for a subscription model. "),(0,r.kt)("p",null,"With Keypom, you can give Moon a multi-use simple drop with a ",(0,r.kt)("inlineCode",{parentName:"p"},"throttle")," parameter set to 2 weeks. This way, Moon will only be able to claim every week, making it a subscription. This is also beneficial in giving a sense of security to Moon, as they can claim later than Monday and know that they will be able to claim again next Monday. "),(0,r.kt)("p",null,"If, for one week, Moon forgets to claim, he would be able to claim twice the next week."),(0,r.kt)("p",null,"The massive benefit here is that you can have a subscription service in the NEAR ecosystem and never need to expose any of your private information."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"example-time-configuration"},"Example Time Configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const ONE_SECOND_NS = 1e9;\n\ntime: {\n    // Start time is 30 seconds from now\n    start: (Date.now() * 1000000) + ONE_SECOND_NS * 30,\n\n    // End time is 5 minutes from start time\n    end: (Date.now() * 1000000) + ONE_SECOND_NS * 330,\n\n    // Time between use is 15 seconds\n    throttle: ONE_SECOND_NS * 15,\n\n    // Time after start for first use is 15 seconds\n    interval: ONE_SECOND_NS * 15,\n}\n")))}f.isMDXComponent=!0}}]);